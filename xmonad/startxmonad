#!/bin/sh

cd ~

if [ -d /etc/X11/xinit/xinitrc.d ]; then
  for f in /etc/X11/xinit/xinitrc.d/*; do
    [ -x "$f" ] && . "$f"
  done
  unset f
fi

hsetroot -fill ~/.xmonad/root.png     # Set the wallpaper

# X11 settings
numlockx on                           # Turn on Num Lock
xmodmap -e 'clear lock'               # Clear Caps Lock
xmodmap -e 'keycode 0x42 = Escape'    # Map Caps Lock to Esc
# xmodmap -e 'keycode 0x09 = Caps_Lock' # Map Esc to Caps Lock
xset r rate 175 35                    # Faster key repeat
xrdb ~/.Xresources
xsetroot -cursor_name left_ptr

# Start some daemons
xfce4-power-manager
dropbox start
eval `/usr/bin/gnome-keyring-daemon --start components=gpg,pkcs11,secrets`
export GPG_AGENT_INFO
export GNOME_KEYRING_CONTROL
export GNOME_KEYRING_PID
eval `ssh-agent`

xscreensaver -no-splash & # Screensaver
nm-applet &               # NetworkManager applet
volumeicon &              # Volume applet
xcompmgr &                # Start the compositing manager
xmonad                    # Start the window manager
